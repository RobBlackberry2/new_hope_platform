<!doctype html>
<html lang="es">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ELR-001 - Crear Clase Virtual</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div class="container">
    <header>
      <div class="brand">
        <div class="logo">NHS</div>
        <div>
          <div style="font-weight:700">New Hope School</div>
          <div style="font-size:12px;color:var(--muted)">Página oficial</div>
        </div>
      </div>
      <nav>
        <a href="index.html">Inicio</a>
        <a href="#servicios">Administrativo</a>
        <a href="#servicios">Gestión de Usuarios</a>
        <a href="#servicios">Reportes</a>
        <a href="Elr-002-visualizar-clases.html">E-Learning</a>
        <a href="index.html">Contacto</a>
      </nav>
    </header>

    <main class="hero">
      <div class="container">
        <div class="card">
          <h1>ELR-001: Crear Clase Virtual</h1>
          <p class="lead"><strong>Historia de usuario:</strong> Como docente quiero crear clases virtuales para
            organizar las lecciones de mi asignatura por semanas dentro de la plataforma.</p>

          <form id="formClase">
            <label>Fecha inicio</label>
            <input type="date" id="fecha_inicio" required />

            <label>Fecha final</label>
            <input type="date" id="fecha_final" required />

            <label>Asignatura</label>
            <input type="text" id="asignatura" required />

            <label>Profesor</label>
            <input type="text" id="profesor" required />

            <label>Nivel Académico</label>
            <select id="nivel_academico" required>
              <option value="">Seleccione</option>
              <option>Septimo</option>
              <option>Octavo</option>
              <option>Noveno</option>
              <option>Décimo</option>
              <option>Undécimo</option>
            </select>

            <label>Grupo</label>
            <input type="text" id="grupo" required />

            <button type="submit">Crear Clase Virtual</button>

            <div id="mensaje" class="msg"></div>
          </form>
        </div>
      </div>
    </main>

    <footer>
      <div style="max-width:800px;margin:0 auto">© <span id="year"></span> New Hope Digital Learning <span
          style="color:var(--muted)">Versión demo</span></div>
    </footer>

</body>

</html>

<script>
  const form = document.getElementById('formClase');
  const mensaje = document.getElementById('mensaje');

  const clasesRegistradas = [
    { profesor: "Juan Pérez", grupo: "7-2" }
  ];

  form.addEventListener('submit', function (e) {
    e.preventDefault();

    const datos = {
      fecha_inicio: fecha_inicio.value.trim(),
      fecha_final: fecha_final.value.trim(),
      asignatura: asignatura.value.trim(),
      profesor: profesor.value.trim(),
      nivel_academico: nivel_academico.value.trim(),
      grupo: grupo.value.trim()
    };

    const regexInvalido = /[^a-zA-Z0-9áéíóúÁÉÍÓÚñÑ\s\-]/;
    for (const key in datos) {
      if (!datos[key]) {
        mostrarMensaje('err', 'Algún espacio quedó en blanco.');
        return;
      }
      if (regexInvalido.test(datos[key])) {
        mostrarMensaje('err', 'Se ingresaron caracteres inválidos.');
        return;
      }
    }

    const duplicada = clasesRegistradas.some(c =>
      c.profesor.toLowerCase() === datos.profesor.toLowerCase() &&
      c.grupo.toLowerCase() === datos.grupo.toLowerCase()
    );

    if (duplicada) {
      mostrarMensaje('err', 'La clase virtual ya existe.');
      return;
    }

    mostrarMensaje('ok', 'La clase fue creada exitosamente.');
  });

  function mostrarMensaje(tipo, texto) {
    mensaje.className = 'msg ' + (tipo === 'ok' ? 'ok' : 'err');
    mensaje.textContent = texto;
    mensaje.style.display = 'block';
  }
</script>