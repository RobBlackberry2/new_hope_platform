<!doctype html>
<html lang="es">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ELR-012 - Bit√°cora de Cambios</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div class="admin-container">
    <aside class="sidebar">
      <div class="brand">
        <div class="logo">NHS</div>
        <div>
          <div style="font-weight:700">New Hope School</div>
          <div style="font-size:12px;color:var(--muted)">E-Learning</div>
        </div>
      </div>
      <nav>
        <div
          style="font-size:11px;text-transform:uppercase;color:var(--muted);margin-bottom:8px;font-weight:800;letter-spacing:0.5px">
          M√≥dulo E-Learning</div>
        <a href="Elr-001-clase-virtual.html" class="active">
          <span>üìö</span> Clases virtuales
        </a>
        <a href="Elr-004-Eliminar-secciones.html">
          <span>üèÜ</span> Gamificaci√≥n
        </a>
        <a href="REF-002 - Generaci√≥n de Reportes Filtrados.html">
          <span>üí¨</span> Foros
        </a>

        <div style="height:12px"></div>
        <div
          style="font-size:11px;text-transform:uppercase;color:var(--muted);margin-bottom:8px;font-weight:800;letter-spacing:0.5px">
          Navegaci√≥n Principal</div>
        <a href="index.html"><span>üè†</span> Inicio</a>
        <a href="Elr-001-clase-virtual.html"><span>üë®‚Äçüè´</span> Docentes</a>
        <a href="ELR‚Äë005-administrar-clases.html"><span>‚öôÔ∏è</span> Administrador</a>
        <a href="ELR‚Äë005-administrar-clases.html"><span>üéì</span> Estudiantes</a>
        <a href="ELR-013 - Consultar Bit√°cora de Cambios.html"><span>üíª</span> E-Learning</a>
      </nav>
    </aside>


    <main class="hero">
      <div class="card">
        <h1>ELR-012: Bit√°cora de Cambios</h1>
        <p class="lead">
          <strong>Historia de usuario:</strong> Como administrador quiero que exista una bit√°cora que documente todo el
          contenido que se sube, modifica o elimina para mantener un historial de cambios actualizado.
        </p>

        <!-- Simulaci√≥n de acciones -->
        <h3>Acciones recientes</h3>
        <div class="lista" id="acciones">
          <div class="form-contenido">
            <h3>Subida de archivo</h3>
            <p>Clase: MAT-8-1 | Usuario: Docente-001 | Archivo: Introducci√≥n.pdf</p>
            <button onclick="registrarEvento('MAT-8-1','Docente-001','Archivo: Introducci√≥n.pdf','subida')">Registrar en
              Bit√°cora</button>
          </div>

          <div class="form-contenido">
            <h3>Modificaci√≥n de secci√≥n</h3>
            <p>Clase: MAT-8-1 | Usuario: Docente-002 | Secci√≥n: Semana 2</p>
            <button onclick="registrarEvento('MAT-8-1','Docente-002','Secci√≥n: Semana 2','modificaci√≥n')">Registrar en
              Bit√°cora</button>
          </div>

          <div class="form-contenido">
            <h3>Eliminaci√≥n de archivo</h3>
            <p>Clase: MAT-8-1 | Usuario: Admin-001 | Archivo: Ejercicios.png</p>
            <button onclick="registrarEvento('MAT-8-1','Admin-001','Archivo: Ejercicios.png','eliminaci√≥n')">Registrar
              en Bit√°cora</button>
          </div>
        </div>

        <!-- Mensajes -->
        <div id="mensaje" class="msg"></div>

        <!-- Bit√°cora -->
        <h3 style="margin-top:20px">Bit√°cora de Cambios</h3>
        <div id="bitacora" class="lista"></div>
      </div>
    </main>

    <footer>
      <div style="max-width:800px;margin:0 auto">
        ¬© <span id="year"></span> New Hope Digital Learning
        <span style="color:var(--muted)">Versi√≥n demo</span>
      </div>
    </footer>
  </div>

  <script>
    const mensaje = document.getElementById('mensaje');
    const bitacora = document.getElementById('bitacora');

    function registrarEvento(idClase, idUsuario, idElemento, tipo) {
      // Simulaci√≥n de error aleatorio (20% probabilidad)
      const fallo = Math.random() < 0.2;

      if (fallo) {
        mostrarMensaje('err', 'Error: el evento no se registr√≥ en la bit√°cora. Intente nuevamente m√°s tarde.');
        return;
      }

      // Registro exitoso
      const registro = document.createElement('div');
      registro.className = 'form-contenido';
      registro.innerHTML = `<strong>${tipo.toUpperCase()}</strong><br>
                          Clase: ${idClase} | Usuario: ${idUsuario} | Elemento: ${idElemento} | Fecha: ${new Date().toLocaleString()}`;
      bitacora.appendChild(registro);

      mostrarMensaje('ok', 'Evento registrado exitosamente en la bit√°cora.');
    }

    function mostrarMensaje(tipo, texto) {
      mensaje.className = 'msg ' + (tipo === 'ok' ? 'ok' : 'err');
      mensaje.textContent = texto;
      mensaje.style.display = 'block';
    }

    // A√±o din√°mico en footer
    document.getElementById('year').textContent = new Date().getFullYear();
  </script>
</body>

</html>