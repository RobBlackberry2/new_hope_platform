<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ELR-020 - Calcular Nota Automática</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <header>
      <div class="brand">
        <div class="logo">NHS</div>
        <div>
          <div style="font-weight:700">New Hope School</div>
          <div style="font-size:12px;color:var(--muted)">Página oficial</div>
        </div>
      </div>
      <nav>
        <a href="index.html">Inicio</a>
        <a href="#servicios">Administrativo</a>
        <a href="#servicios">Gestión de Usuarios</a>
        <a href="#servicios">Reportes</a>
        <a href="ELR-021-Calcular Promedio de Estudiante.html">E-Learning</a>
        <a href="index.html">Contacto</a>
      </nav>
    </header>

    <main class="hero">
      <div class="card">
        <h1>ELR-020: Calcular Nota Automática</h1>
        <p class="lead">
          <strong>Historia de usuario:</strong> Como docente quiero que el sistema tenga definida la fórmula que convierte los puntos obtenidos en la nota final para que las notas de los entregables se actualicen de manera automática.
        </p>

        <form id="formNota">
          <label>ID Entregable</label>
          <input type="text" id="id_entregable" required />

          <label>Puntos obtenidos</label>
          <input type="number" id="puntos_obtenidos" min="0" required />

          <label>Total de puntos</label>
          <input type="number" id="total_puntos" min="1" required />

          <button type="submit">Calcular Nota</button>
          <div id="mensaje" class="msg"></div>
        </form>

        <!-- Resultado -->
        <h3 style="margin-top:20px">Resultado</h3>
        <div id="resultado" class="lista"></div>
      </div>
    </main>

    <footer>
      <div style="max-width:800px;margin:0 auto">
        © <span id="year"></span> New Hope Digital Learning
        <span style="color:var(--muted)">Versión demo</span>
      </div>
    </footer>
  </div>

<script>
  const form = document.getElementById('formNota');
  const mensaje = document.getElementById('mensaje');
  const resultado = document.getElementById('resultado');

  form.addEventListener('submit', function(e){
    e.preventDefault();

    const idEntregable = id_entregable.value.trim();
    const puntosObtenidos = parseFloat(puntos_obtenidos.value.trim());
    const totalPuntos = parseFloat(total_puntos.value.trim());

    // Validación: campos vacíos o inválidos
    if(!idEntregable || isNaN(puntosObtenidos) || isNaN(totalPuntos) || totalPuntos <= 0){
      mostrarMensaje('err','Hubo un error: revise los datos ingresados.');
      return;
    }

    // Cálculo de la nota
    const nota = (puntosObtenidos / totalPuntos) * 100;

    if(isNaN(nota) || nota < 0){
      mostrarMensaje('err','Hubo un error en el cálculo. Revise los atributos.');
      return;
    }

    // Nota calculada correctamente
    mostrarMensaje('ok','La nota fue calculada automáticamente.');
    resultado.innerHTML = `<div class="form-contenido">
      <strong>${idEntregable}</strong><br>
      Puntos obtenidos: ${puntosObtenidos} / ${totalPuntos}<br>
      Nota final: ${nota.toFixed(2)}%
    </div>`;
    form.reset();
  });

  function mostrarMensaje(tipo,texto){
    mensaje.className = 'msg ' + (tipo === 'ok' ? 'ok' : 'err');
    mensaje.textContent = texto;
    mensaje.style.display = 'block';
  }

  // Año dinámico en footer
  document.getElementById('year').textContent = new Date().getFullYear();
</script>
</body>
</html>